---
apiVersion: helm.toolkit.fluxcd.io/v2beta1
kind: HelmRelease
metadata:
  name: omada-controller
  namespace: network
spec:
  values:
    mongoUri:
      secretName: mongo-omada-connection-string
      secretKey: connectionString.standard
    service:
      type: NodePort
      ports:
        discovery: 29811
      nodePorts:
        discovery: 32000
    containerPorts:
      discovery: 29811
    livenessProbe:
      enabled: false
    readinessProbe:
      enabled: false
    image: ghcr.io/damoun/omada-controller:main
